!function(){"use strict";var t="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e=void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};const i=["catalan","croatian","czech","danish","dutch","english","american","finnish","french","german","greek","italian","latin","norwegian","polish","portuguese","brazilian","russian","slovene","spanish","swedish"],a={abstract:{type:"f_long_literal",biblatex:"abstract",csl:"abstract"},addendum:{type:"f_literal",biblatex:"addendum"},afterword:{type:"l_name",biblatex:"afterword"},annotation:{type:"f_long_literal",biblatex:"annotation"},annotator:{type:"l_name",biblatex:"annotator"},author:{type:"l_name",biblatex:"author",csl:"author"},bookauthor:{type:"l_name",biblatex:"bookauthor",csl:"container-author"},bookpagination:{type:"f_key",biblatex:"bookpagination",options:["page","column","section","paragraph","verse","line"]},booksubtitle:{type:"f_title",biblatex:"booksubtitle"},booktitle:{type:"f_title",biblatex:"booktitle",csl:"container-title"},booktitleaddon:{type:"f_title",biblatex:"booktitleaddon"},chapter:{type:"f_literal",biblatex:"chapter",csl:"chapter-number"},commentator:{type:"l_name",biblatex:"commentator"},date:{type:"f_date",biblatex:"date",csl:"issued"},doi:{type:"f_verbatim",biblatex:"doi",csl:"DOI"},edition:{type:"f_integer",biblatex:"edition",csl:"edition"},editor:{type:"l_name",biblatex:"editor",csl:"editor"},editora:{type:"l_name",biblatex:"editora"},editorb:{type:"l_name",biblatex:"editorb"},editorc:{type:"l_name",biblatex:"editorc"},editortype:{type:"f_key",biblatex:"editortype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editoratype:{type:"f_key",biblatex:"editoratype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editorbtype:{type:"f_key",biblatex:"editorbtype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editorctype:{type:"f_key",biblatex:"editorctype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},eid:{type:"f_literal",biblatex:"eid"},entrysubtype:{type:"f_literal",biblatex:"entrysubtype"},eprint:{type:"f_verbatim",biblatex:"eprint"},eprintclass:{type:"f_literal",biblatex:"eprintclass"},eprinttype:{type:"f_literal",biblatex:"eprinttype"},eventdate:{type:"f_date",biblatex:"eventdate",csl:"event-date"},eventtitle:{type:"f_title",biblatex:"eventtitle",csl:"event"},file:{type:"f_verbatim",biblatex:"file"},foreword:{type:"l_name",biblatex:"foreword"},holder:{type:"l_name",biblatex:"holder"},howpublished:{type:"f_literal",biblatex:"howpublished",csl:"medium"},indextitle:{type:"f_literal",biblatex:"indextitle"},institution:{type:"l_literal",biblatex:"institution"},introduction:{type:"l_name",biblatex:"introduction"},isan:{type:"f_literal",biblatex:"isan",csl:"number"},isbn:{type:"f_literal",biblatex:"isbn",csl:"ISBN"},ismn:{type:"f_literal",biblatex:"ismn",csl:"number"},isrn:{type:"f_literal",biblatex:"isrn",csl:"number"},issn:{type:"f_literal",biblatex:"issn",csl:"ISSN"},issue:{type:"f_literal",biblatex:"issue",csl:"issue"},issuesubtitle:{type:"f_literal",biblatex:"issuesubtitle"},issuetitle:{type:"f_literal",biblatex:"issuetitle"},iswc:{type:"f_literal",biblatex:"iswc",csl:"number"},journalsubtitle:{type:"f_literal",biblatex:"journalsubtitle"},journaltitle:{type:"f_title",biblatex:"journaltitle",csl:"container-title"},keywords:{type:"l_tag",biblatex:"keywords"},label:{type:"f_literal",biblatex:"label"},language:{type:"l_key",biblatex:"language",options:i},langid:{type:"f_key",strict:!0,biblatex:"langid",csl:"language",options:{acadian:{csl:"fr-CA",biblatex:"acadian"},afrikaans:{csl:"af-ZA",biblatex:"afrikaans"},arabic:{csl:"ar",biblatex:"arabic"},basque:{csl:"eu",biblatex:"basque"},bulgarian:{csl:"bg-BG",biblatex:"bulgarian"},catalan:{csl:"ca-AD",biblatex:"catalan"},chinese:{csl:"zh-CN",biblatex:"pinyin"},croatian:{csl:"hr-HR",biblatex:"croatian"},czech:{csl:"cs-CZ",biblatex:"czech"},danish:{csl:"da-DK",biblatex:"danish"},dutch:{csl:"nl-NL",biblatex:"dutch"},auenglish:{csl:"en-GB",biblatex:"australian"},caenglish:{csl:"en-US",biblatex:"canadian"},nzenglish:{csl:"en-GB",biblatex:"newzealand"},ukenglish:{csl:"en-GB",biblatex:"ukenglish"},usenglish:{csl:"en-US",biblatex:"usenglish"},estonian:{csl:"et-EE",biblatex:"estonian"},finnish:{csl:"fi-FI",biblatex:"finnish"},french:{csl:"fr-FR",biblatex:"french"},cafrench:{csl:"fr-CA",biblatex:"canadien"},german:{csl:"de-DE",biblatex:"ngerman"},atgerman:{csl:"de-AT",biblatex:"naustrian"},greek:{csl:"el-GR",biblatex:"greek"},hebrew:{csl:"he-IL",biblatex:"hebrew"},hungarian:{csl:"hu-HU",biblatex:"hungarian"},icelandic:{csl:"is-IS",biblatex:"icelandic"},italian:{csl:"it-IT",biblatex:"italian"},japanese:{csl:"ja-JP",biblatex:"japanese"},latin:{csl:"la",biblatex:"latin"},latvian:{csl:"lv-LV",biblatex:"latvian"},lithuanian:{csl:"lt-LT",biblatex:"lithuanian"},magyar:{csl:"hu-HU",biblatex:"magyar"},mongolian:{csl:"mn-MN",biblatex:"mongolian"},norwegian:{csl:"nb-NO",biblatex:"norsk"},newnorwegian:{csl:"nn-NO",biblatex:"nynorsk"},farsi:{csl:"fa-IR",biblatex:"farsi"},polish:{csl:"pl-PL",biblatex:"polish"},portuguese:{csl:"pt-PT",biblatex:"portuguese"},brportuguese:{csl:"pt-BR",biblatex:"brazilian"},romanian:{csl:"ro-RO",biblatex:"romanian"},russian:{csl:"ru-RU",biblatex:"russian"},serbian:{csl:"sr-RS",biblatex:"serbian"},cyrillicserbian:{csl:"sr-RS",biblatex:"serbianc"},slovak:{csl:"sk-SK",biblatex:"slovak"},slovene:{csl:"sl-SL",biblatex:"slovene"},spanish:{csl:"es-ES",biblatex:"spanish"},swedish:{csl:"sv-SE",biblatex:"swedish"},thai:{csl:"th-TH",biblatex:"thai"},turkish:{csl:"tr-TR",biblatex:"turkish"},ukrainian:{csl:"uk-UA",biblatex:"ukrainian"},vietnamese:{csl:"vi-VN",biblatex:"vietnamese"}}},library:{type:"f_literal",biblatex:"library"},location:{type:"l_literal",biblatex:"location",csl:"publisher-place"},mainsubtitle:{type:"f_title",biblatex:"mainsubtitle"},maintitle:{type:"f_title",biblatex:"maintitle"},maintitleaddon:{type:"f_title",biblatex:"maintitleaddon"},nameaddon:{type:"f_literal",biblatex:"nameaddon"},note:{type:"f_literal",biblatex:"note",csl:"note"},number:{type:"f_literal",biblatex:"number",csl:{"article-journal":"issue",patent:"number","*":"collection-number"}},organization:{type:"l_literal",biblatex:"organization"},origdate:{type:"f_date",biblatex:"origdate",csl:"original-date"},origlanguage:{type:"f_key",biblatex:"origlanguage",options:i},origlocation:{type:"l_literal",biblatex:"origlocation",csl:"original-publisher-place"},origpublisher:{type:"l_literal",biblatex:"origpublisher",csl:"original-publisher"},origtitle:{type:"f_title",biblatex:"origtitle",csl:"original-title"},pages:{type:"l_range",biblatex:"pages",csl:"page"},pagetotal:{type:"f_literal",biblatex:"pagetotal",csl:"number-of-pages"},pagination:{type:"f_key",biblatex:"pagination",options:["page","column","section","paragraph","verse","line"]},part:{type:"f_literal",biblatex:"part"},publisher:{type:"l_literal",biblatex:"publisher",csl:"publisher"},pubstate:{type:"f_key",biblatex:"pubstate",csl:"status",options:{inpreparation:{csl:"in preparation",biblatex:"inpreparation"},submitted:{csl:"submitted",biblatex:"submitted"},forthcoming:{csl:"forthcoming",biblatex:"forthcoming"},inpress:{csl:"in press",biblatex:"inpress"},prepublished:{csl:"prepublished",biblatex:"prepublished"}}},reprinttitle:{type:"f_literal",biblatex:"reprinttitle"},series:{type:"f_title",biblatex:"series",csl:"collection-title"},shortauthor:{type:"l_name",biblatex:"shortauthor"},shorteditor:{type:"l_name",biblatex:"shorteditor"},shorthand:{type:"f_literal",biblatex:"shorthand"},shorthandintro:{type:"f_literal",biblatex:"shorthandintro"},shortjournal:{type:"f_title",biblatex:"shortjournal",csl:"container-title-short"},shortseries:{type:"f_literal",biblatex:"shortseries"},shorttitle:{type:"f_title",biblatex:"shorttitle",csl:"title-short"},subtitle:{type:"f_title",biblatex:"subtitle"},title:{type:"f_title",biblatex:"title",csl:"title"},titleaddon:{type:"f_title",biblatex:"titleaddon"},translator:{type:"l_name",biblatex:"translator",csl:"translator"},type:{type:"f_key",biblatex:"type",options:["manual","patent","report","thesis","mathesis","phdthesis","candthesis","techreport","resreport","software","datacd","audiocd"]},url:{type:"f_uri",biblatex:"url",csl:"URL"},urldate:{type:"f_date",biblatex:"urldate",csl:"accessed"},venue:{type:"f_literal",biblatex:"venue",csl:"event-place"},version:{type:"f_literal",biblatex:"version",csl:"version"},volume:{type:"f_literal",biblatex:"volume",csl:"volume"},volumes:{type:"f_literal",biblatex:"volumes",csl:"number-of-volumes"}},r={"article-journal":{order:1,biblatex:"article",csl:"article-journal",required:["journaltitle","title","author","date","langid"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","note","number","pages","pagination","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","version","volume","origdate","origlanguage","origtitle","annotation","keywords"]},"article-magazine":{order:2,biblatex:"article","biblatex-subtype":"magazine",csl:"article-magazine",required:["journaltitle","title","author","date","langid"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","note","number","pages","pagination","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","version","volume","origdate","origlanguage","origtitle","annotation","keywords"]},"article-newspaper":{order:3,biblatex:"article","biblatex-subtype":"newspaper",csl:"article-newspaper",required:["journaltitle","title","author","date","langid"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","note","number","pages","pagination","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","version","volume","origdate","origlanguage","origtitle","annotation","keywords"]},article:{order:4,biblatex:"article",csl:"article",required:["journaltitle","title","author","date","langid"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","note","number","pages","pagination","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","version","volume","origdate","origlanguage","origtitle","annotation","keywords"]},"post-weblog":{order:5,biblatex:"online",csl:"post-weblog",required:["date","title","url","langid"],eitheror:["editor","author"],optional:["abstract","addendum","pubstate","shorttitle","subtitle","language","urldate","titleaddon","version","note","organization","origtitle","annotation","keywords"]},book:{order:10,biblatex:"book",csl:"book",required:["title","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},mvbook:{order:11,biblatex:"mvbook",csl:"book",required:["title","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","note","number","pagetotal","bookpagination","publisher","pubstate","series","subtitle","shorttitle","titleaddon","translator","url","urldate","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},inbook:{order:12,biblatex:"inbook",csl:"chapter",required:["title","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},bookinbook:{order:13,biblatex:"bookinbook",csl:"chapter",required:["title","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},suppbook:{order:14,biblatex:"suppbook",csl:"chapter",required:["title","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},booklet:{order:15,biblatex:"booklet",csl:"pamphlet",required:["title","date","langid"],eitheror:["editor","author"],optional:["abstract","titleaddon","addendum","pages","pagination","howpublished","type","pubstate","chapter","doi","shorttitle","subtitle","language","location","url","urldate","pagetotal","bookpagination","note","eprint","eprintclass","eprinttype","origlanguage","origlocation","origtitle","annotation","keywords"]},collection:{order:20,biblatex:"collection",csl:"dataset",required:["editor","title","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},mvcollection:{order:21,biblatex:"mvcollection",csl:"dataset",required:["editor","title","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","note","number","pagetotal","bookpagination","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},incollection:{order:22,biblatex:"incollection",csl:"chapter",required:["title","editor","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},suppcollection:{order:23,biblatex:"suppcollection",csl:"chapter",required:["title","editor","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","annotation","keywords"]},post:{order:30,biblatex:"online",csl:"post",required:["date","title","url","langid"],eitheror:["editor","author"],optional:["abstract","addendum","pubstate","subtitle","shorttitle","language","urldate","titleaddon","version","note","organization","origtitle","annotation","keywords"]},manual:{order:40,biblatex:"manual",csl:"book",required:["title","date","langid"],eitheror:["editor","author"],optional:["abstract","addendum","chapter","doi","edition","eprint","eprintclass","eprinttype","isbn","language","location","note","number","organization","pages","pagination","pagetotal","bookpagination","publisher","pubstate","series","shorttitle","subtitle","titleaddon","type","url","urldate","version","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},misc:{order:41,biblatex:"misc",csl:"article",required:["title","date","langid"],eitheror:["editor","author"],optional:["abstract","addendum","howpublished","type","pubstate","organization","doi","shorttitle","subtitle","language","location","url","urldate","titleaddon","version","note","eprint","eprintclass","eprinttype","origlanguage","origlocation","origtitle","annotation","keywords"]},online:{order:42,biblatex:"online",csl:"webpage",required:["date","title","url","langid"],eitheror:["editor","author"],optional:["abstract","addendum","language","note","organization","pubstate","shorttitle","subtitle","titleaddon","urldate","version","origtitle","annotation","keywords"]},patent:{order:43,biblatex:"patent",csl:"patent",required:["title","number","author","date"],eitheror:[],optional:["abstract","addendum","holder","location","pubstate","doi","shorttitle","subtitle","titleaddon","type","url","urldate","version","note","eprint","eprintclass","eprinttype","annotation","keywords"]},periodical:{order:50,biblatex:"periodical",csl:"book",required:["editor","title","date","langid"],eitheror:[],optional:["abstract","addendum","volume","pubstate","number","series","issn","issue","issuesubtitle","issuetitle","doi","shorttitle","subtitle","editora","editorb","editorc","url","urldate","language","note","eprint","eprintclass","eprinttype","origtitle","annotation","keywords"]},suppperiodical:{order:51,biblatex:"suppperiodical",csl:"article",required:["journaltitle","title","author","date","langid"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","note","number","pages","pagination","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","version","volume","origdate","origlanguage","origtitle","annotation","keywords"]},proceedings:{order:60,biblatex:"proceedings",csl:"book",required:["editor","title","date","langid"],eitheror:[],optional:["abstract","addendum","chapter","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","organization","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","url","urldate","venue","volume","volumes","annotation","keywords"]},mvproceedings:{order:61,biblatex:"mvproceedings",csl:"book",required:["editor","title","date","langid"],eitheror:[],optional:["abstract","addendum","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","location","note","number","organization","pagetotal","bookpagination","publisher","pubstate","series","shorttitle","subtitle","titleaddon","url","urldate","venue","volumes","annotation","keywords"]},inproceedings:{order:62,biblatex:"inproceedings",csl:"paper-conference",required:["title","editor","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","booksubtitle","booktitleaddon","chapter","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","organization","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","url","urldate","venue","volume","volumes","annotation","keywords"]},reference:{order:70,biblatex:"book",csl:"reference",required:["editor","title","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},mvreference:{order:71,biblatex:"mvreference",csl:"book",required:["editor","title","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","note","number","pagetotal","bookpagination","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},inreference:{order:72,biblatex:"inreference",csl:"entry-encyclopedia",required:["title","editor","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},"entry-encyclopedia":{order:73,biblatex:"inreference",csl:"entry-encyclopedia",required:["title","editor","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},"entry-dictionary":{order:74,biblatex:"inreference",csl:"entry-dictionary",required:["title","editor","booktitle","author","date","langid"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","location","mainsubtitle","maintitle","maintitleaddon","note","number","pages","pagination","part","publisher","pubstate","series","shorttitle","subtitle","titleaddon","translator","url","urldate","volume","volumes","origdate","origlanguage","origlocation","origpublisher","origtitle","annotation","keywords"]},report:{order:80,biblatex:"report",csl:"report",required:["author","title","type","institution","date","langid"],eitheror:[],optional:["abstract","addendum","pages","pagination","pagetotal","bookpagination","pubstate","number","isrn","chapter","doi","shorttitle","subtitle","language","location","url","urldate","titleaddon","version","note","eprint","eprintclass","eprinttype","annotation","keywords"]},thesis:{order:81,biblatex:"thesis",csl:"thesis",required:["author","title","type","institution","date","langid"],eitheror:[],optional:["abstract","addendum","pages","pagination","pagetotal","bookpagination","pubstate","isbn","chapter","doi","shorttitle","subtitle","language","location","url","urldate","titleaddon","note","eprint","eprintclass","eprinttype","annotation","keywords"]},unpublished:{order:90,biblatex:"unpublished",csl:"manuscript",required:["title","author","date"],eitheror:[],optional:["abstract","addendum","howpublished","pubstate","isbn","date","shorttitle","subtitle","language","langid","location","url","urldate","titleaddon","note","annotation","keywords"]}};e.CSLParser=class{constructor(t){this.input=t,this.entries=[],this.errors=[],this.warnings=[]}parse(){for(const[t,e]of Object.entries(this.input)){const i=this.convertEntry(e,t);i&&this.entries.push(i)}const t={};return this.entries.forEach(((e,i)=>{t[i+1]=e})),t}convertEntry(t,e){const i=this.getBibType(t.type||"");if(!i)return this.errors.push({type:"unknown_type",value:t.type,entry:e}),!1;const a={};for(const[i,r]of Object.entries(t)){if("type"===i||"id"===i)continue;const t=this.convertField(i,r,e);t&&(a[t[0]]=t[1])}return{entry_key:e,bib_type:i,fields:a}}getBibType(t){return Object.keys(r).find((e=>r[e].csl===t))||!1}convertField(t,e,i){const o=Object.keys(a).find((e=>{const o=a[e].csl;if("string"==typeof o?o===t:null==o?void 0:o[t]){const t=this.getBibType(this.input[i].type||"");if(!t)return!1;const a=r[t];return a.required.includes(e)||a.optional.includes(e)||a.eitheror.includes(e)}return!1}));if(!o)return this.warnings.push({type:"unknown_field",field:t,value:e,entry:i}),!1;let n;switch(a[o].type){case"f_date":n=this.convertDate(e);break;case"f_integer":n=this.convertInteger(e);break;case"f_key":n=this.convertKey(e,o);break;case"f_literal":case"f_long_literal":case"f_title":n=this.convertRichText(e);break;case"l_range":n=this.convertRange(e);break;case"f_uri":case"f_verbatim":n=String(e);break;case"l_key":n=this.convertKeyList(e,o);break;case"l_literal":n=this.convertLiteralList(e);break;case"l_name":n=this.convertNames(e);break;case"l_tag":n=this.convertTags(e);break;default:n=e}return[o,n]}convertDate(t){if(!t["date-parts"])return"";const e=t["date-parts"][0];let i=String(e[0]);return e[1]&&(i+=`-${String(e[1]).padStart(2,"0")}`,e[2]&&(i+=`-${String(e[2]).padStart(2,"0")}`)),t.circa&&(i+="~"),i}convertNames(t){return t.map((t=>{const e={};return t.literal?e.literal=this.convertRichText(t.literal):(t.family&&(e.family=this.convertRichText(t.family)),t.given&&(e.given=this.convertRichText(t.given)),t.suffix&&(e.suffix=this.convertRichText(t.suffix)),t["non-dropping-particle"]?(e.prefix=this.convertRichText(t["non-dropping-particle"]),e.useprefix=!0):t["dropping-particle"]&&(e.prefix=this.convertRichText(t["dropping-particle"]),e.useprefix=!1)),e}))}convertInteger(t){const e=parseInt(String(t));return[{type:"text",text:isNaN(e)?String(t):String(e)}]}convertKey(t,e){const i=String(t).toLowerCase(),r=a[e];if(r.options){if(Array.isArray(r.options))return r.options.includes(i)?i:"";{const t=r.options;return Object.keys(t).find((e=>t[e].csl===i))||""}}return i}convertRange(t){return String(t).split(",").map((t=>[t.split(/[-–—]/).map((t=>({type:"text",text:t.trim()})))]))}convertKeyList(t,e){return Array.isArray(t)||(t=[String(t)]),t.map((t=>this.convertKey(t,e)))}convertLiteralList(t){return Array.isArray(t)||(t=[String(t)]),t.map((t=>this.convertRichText(t)))}convertTags(t){return Array.isArray(t)||(t=[String(t)]),t.map((t=>t.trim()))}convertRichText(t){if("string"!=typeof t)return[{type:"text",text:String(t)}];if(!t.includes("<"))return[{type:"text",text:t}];const e=[];let i="",a=[];const r=()=>{i&&(e.push({type:"text",text:i,...a.length?{marks:[...a]}:{}}),i="")};let o=0;for(;o<t.length;){if("<"===t[o]){const e="/"===t[o+1],n=t.indexOf(">",o);if(-1===n){i+=t[o],o++;continue}let l=t.substring(e?o+2:o+1,n);if(l.startsWith('span style="font-variant:small-caps;"'))l="smallcaps";else if(l.startsWith('span class="nocase"'))l="nocase";else if("span"===l){o=n+1;continue}const s={b:"strong",i:"em",sub:"sub",sup:"sup",smallcaps:"smallcaps",nocase:"nocase"}[l];if(s){r(),e?a=a.filter((t=>t.type!==s)):a.push({type:s}),o=n+1;continue}}i+=t[o],o++}return r(),e}}}();
//# sourceMappingURL=import-csl.js.map
